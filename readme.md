***Создание Docker Image и загрузка на Docker Hub. Подготовка тестового приложения для кластера k8s***  
  
Для того чтобы у нас было, что разворачивать в контейнерах кластера k8s, нам необходиом хотя бы одно простое приложение. Создадим само приложение и сформируем docker-контейнер на его основе:  
1. Создадим **index.php** в котором напишем простое приложение, отображающее ip-адрес сервера  
```
<?php
$ip_server = $_SERVER['SERVER_ADDR'];

echo "<h1>Hello from PHP application</h1><br>";
echo "<p>Server IP-address is: <strong>$ip_server</strong></p>";
echo "Made by Egor Semenov";
?>
```  
2. Создадим **Dockerfile** и внутри него пропишем установку php, apache2 и последующий их запуск
```
FROM amazonlinux

RUN mkdir /run/php-fpm
RUN yum -y update && yum -y install httpd php

COPY ./index.php /var/www/html/index.php

CMD ["/bin/bash", "-c", "/usr/sbin/php-fpm && /usr/sbin/httpd -D FOREGROUND -c 'ServerName localhost'"]

EXPOSE 80
```  
3. Соберем образ (**Docker Image**) опираясь на только что созданный Dockerfile:  
```
    docker build -t php_app .
```  
4. Теперь отправим наш образ в удаленный репозиторий на Docker Hub:  
- создадим удаленный репозиторий на Docker Hub  
- выполним аутентификация с хоста на Docker Hub с помощью:  
```
    docker login -u egorchek1703
```  
- присвоим созданному образу тэг, который соответствует пути до репозитория на Docker Hub (это делается для того чтобы при отправке образа с нашей локальной машины в удаленные репозиторий, docker понимал в какой именно репозиторий добавлять изменения):  
```
    docker tag php_app:latest egorchek1703/php_app:latest
```  
- отправим локальный образ в репозиторий с помощью:
```
    docker push egorchek1703/php_app:latest
```
*Тут важно указать именно тот тэг образа, который соответствует имени репозитория.*  
  
5. После этого, даже если мы удалим сформированный образ локально, то сможем получить наш образ и сформированное внутри него приложение с помощью:
```
    docker run -d -p 1111:80 egorchek1703/php_app:latest
```    
6. На данном этапе для проверки работоспособности нашего контейнера, достаточно указать в браузере на локальной машине ip хоста с которого запущен docker-контейнер и добавить порт, который мы указали для связи хоста с контейнером, а именно **1111**.  
